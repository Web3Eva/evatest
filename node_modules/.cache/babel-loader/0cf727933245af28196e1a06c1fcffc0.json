{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Lahcen Laayouni/Documents/Eva/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Lahcen Laayouni/Documents/Eva/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Lahcen Laayouni\\\\Documents\\\\Eva\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from\"react\";import'./MessageInFeed.css';import{defaultImgs}from\"../defaultimgs\";import{Icon}from\"web3uikit\";import{useMoralis}from\"react-moralis\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MessageInFeed=function MessageInFeed(_ref){var profile=_ref.profile;var _useState=useState(),_useState2=_slicedToArray(_useState,2),MessageArr=_useState2[0],setMessageArr=_useState2[1];var _useMoralis=useMoralis(),Moralis=_useMoralis.Moralis,account=_useMoralis.account;useEffect(function(){function getMessages(){return _getMessages.apply(this,arguments);}function _getMessages(){_getMessages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var queriy,messageget,Messages,query,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;queriy=new Moralis.Query('Messages');_context.next=4;return queriy.subscribe();case 4:messageget=_context.sent;messageget.on('create',function(object){getMessages();});Messages=Moralis.Object.extend(\"Messages\");query=new Moralis.Query(Messages);if(profile){query.equalTo(\"senderAcc\",account);}_context.next=11;return query.find();case 11:results=_context.sent;setMessageArr(results);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return _getMessages.apply(this,arguments);}getMessages();},[profile]);return/*#__PURE__*/_jsx(_Fragment,{children:MessageArr===null||MessageArr===void 0?void 0:MessageArr.map(function(e){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"feedEva\",children:[/*#__PURE__*/_jsx(\"img\",{src:e.attributes.senderPfp?e.attributes.senderPfp:defaultImgs[0],className:\"profilePic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"completeEva\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"who\",children:[e.attributes.senderUsername.slice(0,6),/*#__PURE__*/_jsx(\"div\",{className:\"accWhen\",children:\"\".concat(e.attributes.senderAcc.slice(0,4),\"...\").concat(e.attributes.senderAcc.slice(38),\" \\xB7 \\n                        \").concat(e.attributes.createdAt.toLocaleString('en-us',{month:'short'}),\"  \\n                        \").concat(e.attributes.createdAt.toLocaleString('en-us',{day:'numeric'}),\"\\n                        \")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"evaContent\",children:[e.attributes.messageTxt,e.attributes.messageImg&&/*#__PURE__*/_jsx(\"img\",{src:e.attributes.messageImg,className:\"evaImg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"interactions\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"interactionNums\",children:/*#__PURE__*/_jsx(Icon,{fill:\"#3f3f3f\",size:20,svg:\"messageCircle\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"interactionNums\",children:/*#__PURE__*/_jsx(Icon,{fill:\"#3f3f3f\",size:20,svg:\"star\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"interactionNums\",children:/*#__PURE__*/_jsx(Icon,{fill:\"#3f3f3f\",size:20,svg:\"matic\"})})]})]})]})});}).reverse()});};export default MessageInFeed;","map":{"version":3,"names":["React","defaultImgs","Icon","useMoralis","useEffect","useState","MessageInFeed","profile","MessageArr","setMessageArr","Moralis","account","getMessages","queriy","Query","subscribe","messageget","on","object","Messages","Object","extend","query","equalTo","find","results","console","error","map","e","attributes","senderPfp","senderUsername","slice","senderAcc","createdAt","toLocaleString","month","day","messageTxt","messageImg","reverse"],"sources":["C:/Users/Lahcen Laayouni/Documents/Eva/src/components/MessageInFeed.js"],"sourcesContent":["import React from \"react\";\nimport './MessageInFeed.css';\nimport {defaultImgs} from \"../defaultimgs\"\nimport {Icon} from \"web3uikit\"\nimport { useMoralis } from \"react-moralis\";\nimport { useEffect, useState } from \"react\";\nconst MessageInFeed = ({profile}) => {\n  const [MessageArr, setMessageArr] = useState();\n  const {Moralis, account} = useMoralis();\n  \n  useEffect(() => {\n    \n    async function getMessages() {\n      try {\n        let queriy = new Moralis.Query('Messages');\n        let messageget = await queriy.subscribe();\n        messageget.on('create', (object) => {\n          getMessages()\n        });\n        const Messages = Moralis.Object.extend(\"Messages\");\n        const query = new Moralis.Query(Messages);\n        if (profile) {\n          query.equalTo(\"senderAcc\", account);\n        }\n        const results = await query.find();\n        setMessageArr(results);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n    getMessages();\n  }, [profile]);\n  \n  return (\n    <>\n    {MessageArr?.map((e) => {\n        return (\n          <>\n            <div className=\"feedEva\">\n              <img src={e.attributes.senderPfp ? e.attributes.senderPfp : defaultImgs[0]} className=\"profilePic\"></img>\n              <div className=\"completeEva\">\n                <div className=\"who\">\n                {e.attributes.senderUsername.slice(0, 6)}\n                  <div className=\"accWhen\">{\n                        `${e.attributes.senderAcc.slice(0, 4)}...${e.attributes.senderAcc.slice(38)} Â· \n                        ${e.attributes.createdAt.toLocaleString('en-us', { month: 'short' })}  \n                        ${e.attributes.createdAt.toLocaleString('en-us', { day: 'numeric' })}\n                        `  \n                      }\n                      </div>\n                </div>\n                <div className=\"evaContent\">\n                {e.attributes.messageTxt}\n                {e.attributes.messageImg && (\n                        <img\n                          src={e.attributes.messageImg}\n                          className=\"evaImg\"\n                        ></img>\n                      )}\n                </div>\n                <div className=\"interactions\">\n                  <div className=\"interactionNums\">\n                    <Icon fill=\"#3f3f3f\" size={20} svg=\"messageCircle\" />\n                  </div>\n                  <div className=\"interactionNums\">\n                    <Icon fill=\"#3f3f3f\" size={20} svg=\"star\" />\n                  </div>\n                  <div className=\"interactionNums\">\n                    <Icon fill=\"#3f3f3f\" size={20} svg=\"matic\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </>\n        );\n      }).reverse()}\n    </>\n  );\n};\nexport default MessageInFeed;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}